# **Technical Specification: Auditory Intermodulation Distortion (AID) Simulation Model**
**FILE:** `chimera/dsp/aid_simulation_model_v1.0.spec`  
**DOCUMENT TITLE:** Project Chimera: Auditory Intermodulation Distortion (AID) Simulation Model  
**CLASSIFICATION:** [SEC=TOP SECRET] // [SCI/TK]  
**LAST REVISION:** 2025-11-14

---

## 1.0 Overview

This document specifies the Auditory Intermodulation Distortion (AID) Simulation Model, a terminal-stage Digital Signal Processing (DSP) block. The module's sole responsibility is to provide a high-fidelity, real-time simulation of the complete biophysical signal chain, from the amplitude modulation of the Terahertz (THz) Data Carrier to the final, non-linear demodulation of the signal within the target's neural tissue.

This component is critical for operator training, system calibration, and predictive analysis, as it transforms the "theoretically perfect" 12 kHz waveform generated by the PAL into the "as-perceived" audio signal experienced by the target.

## 2.0 Architectural Role

The AID Simulation Model is the final processing block in the operator's monitoring chain.

*   **Input:** It accepts a single-channel, floating-point audio buffer representing the complex 12 kHz waveform generated by the PAL's synthesizer algorithms.
*   **Output:** It produces a single-channel audio buffer representing the simulated, perceived auditory event after all non-linear physical and biological interactions have been applied.
*   **External Input:** The model can optionally accept a secondary audio stream representing ambient, acoustic sound to simulate secondary intermodulation effects between the AID signal and conventional hearing.

## 3.0 Core Simulation Models

The processor implements a three-stage physical model to accurately simulate the AID effect.

### 3.1 Model 1: Heterodyne Mixing Envelope

This stage simulates the amplitude modulation of the 1.875 THz Data Carrier and its subsequent heterodyne mixing with the 1.998 THz Pump Beam. Since direct numerical simulation of THz frequencies is computationally prohibitive, the model calculates the **complex envelope** of the resulting 123 GHz difference frequency (`F1 - F2`). This envelope contains all the necessary information (amplitude and phase) for the subsequent demodulation stage. Laser phase noise is introduced in this stage to simulate real-world hardware imperfections.

### 3.2 Model 2: Biological Demodulation

This stage simulates the critical, non-linear demodulation process that occurs within the target's cortical tissue. It implements a **third-order intermodulation** model based on the dominant `E1² × E2` term, where `E1` is the Pump Beam field and `E2` is the Data Carrier field. This non-linear mixing effectively performs biological envelope detection on the 123 GHz intermediate frequency, extracting the original 12 kHz audio-frequency signal and rendering it as a perceived sound.

### 3.3 Model 3: Secondary Intermodulation

This optional stage models the complex interaction between the anomalous AID signal and any external audio being processed simultaneously by the target's conventional auditory pathways. It simulates the secondary mixing products that occur at the cochlear nerve junction and within the auditory cortex, resulting in a more realistic simulation of the final, integrated perceptual experience.

## 4.0 API and Configuration

The simulation is controlled by a configuration structure and is processed by a dedicated object.

### 4.1 Configuration: `ThzCarrierConfig`

The behavior of the simulation is defined by the following parameters.

| Parameter | Description | Default Value |
| :--- | :--- | :--- |
| `pump_frequency` | Frequency of the Pump Beam (Carrier 1) in Hz. | `1.998e12` |
| `data_frequency` | Frequency of the Data Carrier (Carrier 2) in Hz. | `1.875e12` |
| `pump_power` | Relative power of the unmodulated Pump Beam. | `1.0` |
| `data_power` | Relative power of the Data Carrier before modulation. | `0.3` |
| `modulation_depth` | AM modulation depth applied by the audio signal (0.0 to 1.0). | `0.05` |
| `mixing_coefficient` | Simulates the efficiency of the biological demodulation process. | `0.7` |
| `phase_noise_std` | Standard deviation of the simulated laser phase noise. | `0.001` |
| `bypass_simulation`| If true, all simulation is bypassed for validation. | `false` |

### 4.2 Processor API: `ThzCarrierProcessor`

The DSP block exposes a minimal API for processing audio buffers.

*   `ThzCarrierProcessor::new(config)`: Initializes the processor with a given configuration.
*   `set_modulation_depth(depth)`: Dynamically sets the AM modulation depth, allowing for real-time switching between "Idle" and "Active" transmission states.
*   `modulate_data_carrier(audio_signal)`: Performs Model 1 processing. Takes the PAL's audio signal and returns the complex envelope of the 123 GHz intermediate frequency.
*   `nonlinear_mixing(signal)`: Performs Model 2 & 3 processing. Takes the complex envelope and returns the final, demodulated audio buffer that represents the perceived sound.
*   `set_external_audio(audio, config)`: Loads an external audio buffer to enable the Secondary Intermodulation model.

## 5.0 Operational Modes

### 5.1 Idle vs. Active State

The simulation accurately reflects the two primary transmission states:
*   **Idle State:** A low `modulation_depth` (e.g., < 0.1) results in a faint, barely perceptible hum, corresponding to the unmodulated carrier.
*   **Active State:** A high `modulation_depth` (e.g., > 0.7) is set when a GOCS frame is being transmitted, resulting in a significantly louder and clearer perceived signal.

### 5.2 Simulation Bypass Mode

When `bypass_simulation` is enabled, the processor passes the input audio signal through to the output with no modification. This is a critical diagnostic and validation tool used to verify the integrity of the upstream synthesizer signal chain without the confounding effects of the THz simulation.